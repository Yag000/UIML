<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/hferee/UIML">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="./demo.html"> Demo </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ISL.Order</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="ISL.Environments.html#"><span class="id" title="library">ISL.Environments</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="env_order" class="idref" href="#env_order"><span class="id" title="definition">env_order</span></a> (<a id="454330da0f56a2416dd22d7f96feb974" class="idref" href="#454330da0f56a2416dd22d7f96feb974"><span class="id" title="binder">Γ</span></a> <a id="2e9b9606fe17644c6a7e43c5356c998c" class="idref" href="#2e9b9606fe17644c6a7e43c5356c998c"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>): <span class="id" title="keyword">Prop</span> := <a class="idref" href="ISL.Environments.html#MO.MultisetGt"><span class="id" title="definition">MO.MultisetGt</span></a> <a class="idref" href="ISL.Formulas.html#form_order"><span class="id" title="definition">form_order</span></a> <a class="idref" href="ISL.Order.html#2e9b9606fe17644c6a7e43c5356c998c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#454330da0f56a2416dd22d7f96feb974"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Infix</span> <a id="e87830648f12945c0aeb4eaf8e8aac32" class="idref" href="#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">&quot;</span></a>≺" := <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="18cb969368e82052920d9ba5707bb97c" class="idref" href="#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">&quot;</span></a>Δ ≼ Δ'" := (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="var">Δ</span> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <span class="id" title="var">Δ'</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">Δ</span> <span class="id" title="notation">≡</span> <span class="id" title="var">Δ'</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150).<br/>

<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="ISL.Formulas.html#form_order"><span class="id" title="definition">form_order</span></a> : <span class="id" title="var">mset</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="env_order_trans" class="idref" href="#env_order_trans"><span class="id" title="instance">env_order_trans</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.mord_trans"><span class="id" title="lemma">mord_trans</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">b</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Here we use the theorem of (Dershowitz Manna 1979), formalized in CoLoR as mord_wf, which says that the multiset ordering over a well-founded
     ordering (in our case, the one given by formula weight) is again well-founded. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="wf_env_order" class="idref" href="#wf_env_order"><span class="id" title="definition">wf_env_order</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.mord_wf"><span class="id" title="lemma">mord_wf</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#EnvMS.Sid.Eq.eqA"><span class="id" title="definition">Sid.Eq.eqA</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">y</span> <span class="id" title="var">Heq</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.Wf_nat.html#well_founded_lt_compat"><span class="id" title="lemma">well_founded_lt_compat</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span> := <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;introduce&nbsp;a&nbsp;notion&nbsp;of&nbsp;"pointed"&nbsp;environment,&nbsp;which&nbsp;is&nbsp;simply<br/>
&nbsp;*&nbsp;a&nbsp;pair&nbsp;(Δ,&nbsp;φ),&nbsp;where&nbsp;Δ&nbsp;is&nbsp;an&nbsp;environment&nbsp;and&nbsp;φ&nbsp;is&nbsp;a&nbsp;formula,<br/>
&nbsp;*&nbsp;not&nbsp;necessarily&nbsp;an&nbsp;element&nbsp;of&nbsp;Δ.&nbsp;&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="pointed_env" class="idref" href="#pointed_env"><span class="id" title="definition">pointed_env</span></a> := (<a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>)%<span class="id" title="keyword">type</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;order&nbsp;on&nbsp;pointed&nbsp;environments&nbsp;is&nbsp;given&nbsp;by&nbsp;considering&nbsp;the<br/>
&nbsp;*&nbsp;environment&nbsp;order&nbsp;on&nbsp;the&nbsp;sum&nbsp;of&nbsp;Δ&nbsp;and&nbsp;{φ}.&nbsp;*)</span><br/>
&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;modified&nbsp;from&nbsp;G4IP&nbsp;:&nbsp;right-hand&nbsp;side&nbsp;counts&nbsp;twice,&nbsp;to&nbsp;account&nbsp;for&nbsp;the&nbsp;right&nbsp;box&nbsp;rule.&nbsp;Is&nbsp;this&nbsp;working?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="pointed_env_order" class="idref" href="#pointed_env_order"><span class="id" title="definition">pointed_env_order</span></a> (<a id="pe1:3" class="idref" href="#pe1:3"><span class="id" title="binder">pe1</span></a> : <a class="idref" href="ISL.Order.html#pointed_env"><span class="id" title="definition">pointed_env</span></a>) (<a id="pe2:4" class="idref" href="#pe2:4"><span class="id" title="binder">pe2</span></a> : <a class="idref" href="ISL.Order.html#pointed_env"><span class="id" title="definition">pointed_env</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ISL.Order.html#pe1:3"><span class="id" title="variable">pe1</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ISL.Order.html#pe1:3"><span class="id" title="variable">pe1</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ISL.Order.html#pe1:3"><span class="id" title="variable">pe1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ISL.Order.html#pe2:4"><span class="id" title="variable">pe2</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ISL.Order.html#pe2:4"><span class="id" title="variable">pe2</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ISL.Order.html#pe2:4"><span class="id" title="variable">pe2</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_pointed_order" class="idref" href="#wf_pointed_order"><span class="id" title="lemma">wf_pointed_order</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="ISL.Order.html#pointed_env_order"><span class="id" title="definition">pointed_env_order</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#pointed_env_order"><span class="id" title="definition">pointed_env_order</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Wellfounded.Inverse_Image.html#wf_inverse_image"><span class="id" title="lemma">Inverse_Image.wf_inverse_image</span></a>, <a class="idref" href="ISL.Order.html#wf_env_order"><span class="id" title="definition">wf_env_order</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="76364ed22a942cd0c08a3d02d3963dec" class="idref" href="#76364ed22a942cd0c08a3d02d3963dec"><span class="id" title="notation">&quot;</span></a>≺·" := <a class="idref" href="ISL.Order.html#pointed_env_order"><span class="id" title="definition">pointed_env_order</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_equiv_right_compat" class="idref" href="#env_order_equiv_right_compat"><span class="id" title="lemma">env_order_equiv_right_compat</span></a> {<a id="d1f0e078f04502659f58b18dce315e18" class="idref" href="#d1f0e078f04502659f58b18dce315e18"><span class="id" title="binder">Δ</span></a> <a id="a4ad290a6ed2d015ddf152c85c946e7a" class="idref" href="#a4ad290a6ed2d015ddf152c85c946e7a"><span class="id" title="binder">Δ'</span></a> <a id="f685d51934c3c76d6c0ff85425575596" class="idref" href="#f685d51934c3c76d6c0ff85425575596"><span class="id" title="binder">Δ''</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Order.html#a4ad290a6ed2d015ddf152c85c946e7a"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Order.html#f685d51934c3c76d6c0ff85425575596"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#d1f0e078f04502659f58b18dce315e18"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#f685d51934c3c76d6c0ff85425575596"><span class="id" title="variable">Δ''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Order.html#d1f0e078f04502659f58b18dce315e18"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#a4ad290a6ed2d015ddf152c85c946e7a"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_equiv_left_compat" class="idref" href="#env_order_equiv_left_compat"><span class="id" title="lemma">env_order_equiv_left_compat</span></a> {<a id="be45bd3545ff15616ff7876dda6137a7" class="idref" href="#be45bd3545ff15616ff7876dda6137a7"><span class="id" title="binder">Δ</span></a> <a id="23c2c778efa62203aa193af69fe02299" class="idref" href="#23c2c778efa62203aa193af69fe02299"><span class="id" title="binder">Δ'</span></a> <a id="1e10a4cdc74b9c4d9340c7523885c6f5" class="idref" href="#1e10a4cdc74b9c4d9340c7523885c6f5"><span class="id" title="binder">Δ''</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Order.html#be45bd3545ff15616ff7876dda6137a7"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Order.html#1e10a4cdc74b9c4d9340c7523885c6f5"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#1e10a4cdc74b9c4d9340c7523885c6f5"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#23c2c778efa62203aa193af69fe02299"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Order.html#be45bd3545ff15616ff7876dda6137a7"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#23c2c778efa62203aa193af69fe02299"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="Proper_env_order" class="idref" href="#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="x:11" class="idref" href="#x:11"><span class="id" title="binder">x</span></a> <a id="y:12" class="idref" href="#y:12"><span class="id" title="binder">y</span></a> =&gt; <a class="idref" href="ISL.Order.html#x:11"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ISL.Order.html#y:12"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a>) <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ1</span> <span class="id" title="var">Δ2</span> <span class="id" title="var">H12</span> <span class="id" title="var">Δ3</span> <span class="id" title="var">Δ4</span> <span class="id" title="var">H34</span>; <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_1" class="idref" href="#env_order_1"><span class="id" title="lemma">env_order_1</span></a>  <a id="e0faa87657dc21b78591e155da331111" class="idref" href="#e0faa87657dc21b78591e155da331111"><span class="id" title="binder">Δ</span></a> <a id="72f3f8cef005197d242911c1bbb8d6f4" class="idref" href="#72f3f8cef005197d242911c1bbb8d6f4"><span class="id" title="binder">φ1</span></a> <a id="5517267a1fa693b60453a7a09ed3d6d7" class="idref" href="#5517267a1fa693b60453a7a09ed3d6d7"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#72f3f8cef005197d242911c1bbb8d6f4"><span class="id" title="variable">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#5517267a1fa693b60453a7a09ed3d6d7"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#e0faa87657dc21b78591e155da331111"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#72f3f8cef005197d242911c1bbb8d6f4"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#e0faa87657dc21b78591e155da331111"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#5517267a1fa693b60453a7a09ed3d6d7"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hw</span>.<br/>
<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; [<span class="id" title="tactic">reflexivity</span>| <span class="id" title="tactic">reflexivity</span>|].<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_singleton"><span class="id" title="lemma">MSet.member_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_compat" class="idref" href="#env_order_compat"><span class="id" title="lemma">env_order_compat</span></a>  <a id="f5ddf4e5d97f392810d7e18338a1aed6" class="idref" href="#f5ddf4e5d97f392810d7e18338a1aed6"><span class="id" title="binder">Δ</span></a> <a id="cd47842c8bd46193b56f21360bd227f9" class="idref" href="#cd47842c8bd46193b56f21360bd227f9"><span class="id" title="binder">Δ'</span></a> <a id="66166da63d544acbbc0b50c0143cba0d" class="idref" href="#66166da63d544acbbc0b50c0143cba0d"><span class="id" title="binder">φ1</span></a> <a id="811db5421995400350703bd290e285cb" class="idref" href="#811db5421995400350703bd290e285cb"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#66166da63d544acbbc0b50c0143cba0d"><span class="id" title="variable">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#811db5421995400350703bd290e285cb"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#cd47842c8bd46193b56f21360bd227f9"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#f5ddf4e5d97f392810d7e18338a1aed6"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#cd47842c8bd46193b56f21360bd227f9"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#66166da63d544acbbc0b50c0143cba0d"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#f5ddf4e5d97f392810d7e18338a1aed6"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#811db5421995400350703bd290e285cb"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hw</span> [<span class="id" title="var">Hlt</span> | <span class="id" title="var">Heq</span>].<br/>
- <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Order.html#env_order_1"><span class="id" title="lemma">env_order_1</span></a> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.mord_ext_r"><span class="id" title="lemma">mord_ext_r</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Formulas.html#irreflexive_form_order"><span class="id" title="instance">irreflexive_form_order</span></a>.<br/>
- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_1"><span class="id" title="lemma">env_order_1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_compat</span> : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_add_compat" class="idref" href="#env_order_add_compat"><span class="id" title="lemma">env_order_add_compat</span></a> <a id="a2e5dcaea8ffb27e7bf0ed01299fbe8e" class="idref" href="#a2e5dcaea8ffb27e7bf0ed01299fbe8e"><span class="id" title="binder">Δ</span></a> <a id="dfdc7c0fccc582701e176f26c6c6c97f" class="idref" href="#dfdc7c0fccc582701e176f26c6c6c97f"><span class="id" title="binder">Δ'</span></a> <a id="2d294d8281a611996e28d18383d65b76" class="idref" href="#2d294d8281a611996e28d18383d65b76"><span class="id" title="binder">φ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#a2e5dcaea8ffb27e7bf0ed01299fbe8e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#dfdc7c0fccc582701e176f26c6c6c97f"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#a2e5dcaea8ffb27e7bf0ed01299fbe8e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#2d294d8281a611996e28d18383d65b76"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#dfdc7c0fccc582701e176f26c6c6c97f"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#2d294d8281a611996e28d18383d65b76"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hlt</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hlt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δ1</span> <span class="id" title="var">Δ2</span> <span class="id" title="var">Hlt</span> | <span class="id" title="var">Δ1</span> <span class="id" title="var">Δ2</span> <span class="id" title="var">Δ0</span> <span class="id" title="var">Hlt1</span> <span class="id" title="var">IHHlt1</span> <span class="id" title="var">Hlt2</span> <span class="id" title="var">IHHlt2</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δ0</span> <span class="id" title="var">a</span> <span class="id" title="var">Y</span> <span class="id" title="var">Heq1</span> <span class="id" title="var">Heq2</span> <span class="id" title="var">Hall</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> (@<a class="idref" href="ISL.Environments.html#MO.MSetRed"><span class="id" title="constructor">MSetRed</span></a> <a class="idref" href="ISL.Formulas.html#form_order"><span class="id" title="definition">form_order</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Δ0</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ) <span class="id" title="var">a</span> <span class="id" title="var">Y</span>); <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a>. <span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">IHHlt1</span>| <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHlt2</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;this&nbsp;is&nbsp;just&nbsp;a&nbsp;special&nbsp;case&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_disj_union_compat_left" class="idref" href="#env_order_disj_union_compat_left"><span class="id" title="lemma">env_order_disj_union_compat_left</span></a> <a id="da040409d18a8979ea60ea19ee07df4c" class="idref" href="#da040409d18a8979ea60ea19ee07df4c"><span class="id" title="binder">Δ</span></a> <a id="4703434a5701ad93e2577e843fa6d86a" class="idref" href="#4703434a5701ad93e2577e843fa6d86a"><span class="id" title="binder">Δ'</span></a> <a id="3cb3b5ad05776676b6ec4316c68e6db6" class="idref" href="#3cb3b5ad05776676b6ec4316c68e6db6"><span class="id" title="binder">Δ''</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#da040409d18a8979ea60ea19ee07df4c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#3cb3b5ad05776676b6ec4316c68e6db6"><span class="id" title="variable">Δ''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#da040409d18a8979ea60ea19ee07df4c"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#4703434a5701ad93e2577e843fa6d86a"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#3cb3b5ad05776676b6ec4316c68e6db6"><span class="id" title="variable">Δ''</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#4703434a5701ad93e2577e843fa6d86a"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hlt</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hlt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δ1</span> <span class="id" title="var">Δ2</span> <span class="id" title="var">Hlt</span> | <span class="id" title="var">Δ1</span> <span class="id" title="var">Δ2</span> <span class="id" title="var">Δ0</span> <span class="id" title="var">Hlt1</span> <span class="id" title="var">IHHlt1</span> <span class="id" title="var">Hlt2</span> <span class="id" title="var">IHHlt2</span>].<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δ0</span> <span class="id" title="var">a</span> <span class="id" title="var">Y</span> <span class="id" title="var">Heq1</span> <span class="id" title="var">Heq2</span> <span class="id" title="var">Hall</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> (@<a class="idref" href="ISL.Environments.html#MO.MSetRed"><span class="id" title="constructor">MSetRed</span></a> <a class="idref" href="ISL.Formulas.html#form_order"><span class="id" title="definition">form_order</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Δ0</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>) <span class="id" title="var">a</span> <span class="id" title="var">Y</span>); <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a>. <span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">IHHlt1</span>| <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHlt2</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_disj_union_compat_right" class="idref" href="#env_order_disj_union_compat_right"><span class="id" title="lemma">env_order_disj_union_compat_right</span></a> <a id="80643a2489befbfaa821c9ea50fd915e" class="idref" href="#80643a2489befbfaa821c9ea50fd915e"><span class="id" title="binder">Δ</span></a> <a id="9b99eb32cccb82dc2bb030621791cd45" class="idref" href="#9b99eb32cccb82dc2bb030621791cd45"><span class="id" title="binder">Δ'</span></a> <a id="f8e4c180f46db1ad3aa72e4d400bb1f1" class="idref" href="#f8e4c180f46db1ad3aa72e4d400bb1f1"><span class="id" title="binder">Δ''</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#80643a2489befbfaa821c9ea50fd915e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#f8e4c180f46db1ad3aa72e4d400bb1f1"><span class="id" title="variable">Δ''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#9b99eb32cccb82dc2bb030621791cd45"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#80643a2489befbfaa821c9ea50fd915e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#9b99eb32cccb82dc2bb030621791cd45"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#f8e4c180f46db1ad3aa72e4d400bb1f1"><span class="id" title="variable">Δ''</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a>  <span class="id" title="var">_</span> (<span class="id" title="var">Δ</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Δ''</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>)) . <span class="id" title="var">ms</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_left"><span class="id" title="lemma">env_order_disj_union_compat_left</span></a>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_disj_union_compat" class="idref" href="#env_order_disj_union_compat"><span class="id" title="lemma">env_order_disj_union_compat</span></a> <a id="ccc197e158fbd2c19e90f5d39e97f4e6" class="idref" href="#ccc197e158fbd2c19e90f5d39e97f4e6"><span class="id" title="binder">Δ</span></a> <a id="104d4ce6e14f4ccdb45adc1d17a9a0cc" class="idref" href="#104d4ce6e14f4ccdb45adc1d17a9a0cc"><span class="id" title="binder">Δ'</span></a> <a id="59abc86f948e6e374952f5f3e7bd18dd" class="idref" href="#59abc86f948e6e374952f5f3e7bd18dd"><span class="id" title="binder">Δ''</span></a> <a id="9853a65951f55d4e77464cfe04de8a15" class="idref" href="#9853a65951f55d4e77464cfe04de8a15"><span class="id" title="binder">Δ'''</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#ccc197e158fbd2c19e90f5d39e97f4e6"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#59abc86f948e6e374952f5f3e7bd18dd"><span class="id" title="variable">Δ''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#104d4ce6e14f4ccdb45adc1d17a9a0cc"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#9853a65951f55d4e77464cfe04de8a15"><span class="id" title="variable">Δ'''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#ccc197e158fbd2c19e90f5d39e97f4e6"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#104d4ce6e14f4ccdb45adc1d17a9a0cc"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#59abc86f948e6e374952f5f3e7bd18dd"><span class="id" title="variable">Δ''</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#9853a65951f55d4e77464cfe04de8a15"><span class="id" title="variable">Δ'''</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">Δ</span>  <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'''</span>).<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_right"><span class="id" title="lemma">env_order_disj_union_compat_right</span></a>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_left"><span class="id" title="lemma">env_order_disj_union_compat_left</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_disj_union_compat_strong_right" class="idref" href="#env_order_disj_union_compat_strong_right"><span class="id" title="lemma">env_order_disj_union_compat_strong_right</span></a> <a id="b73faf325f76646787a7bae4ee8ea0fb" class="idref" href="#b73faf325f76646787a7bae4ee8ea0fb"><span class="id" title="binder">Δ</span></a> <a id="3bb4d656e682dad77334af07efd1504f" class="idref" href="#3bb4d656e682dad77334af07efd1504f"><span class="id" title="binder">Δ'</span></a> <a id="575c523ed494b0feefc206676a08b552" class="idref" href="#575c523ed494b0feefc206676a08b552"><span class="id" title="binder">Δ''</span></a> <a id="10952a7be013966263876786dbb71b0c" class="idref" href="#10952a7be013966263876786dbb71b0c"><span class="id" title="binder">Δ'''</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#b73faf325f76646787a7bae4ee8ea0fb"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#575c523ed494b0feefc206676a08b552"><span class="id" title="variable">Δ''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#3bb4d656e682dad77334af07efd1504f"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#10952a7be013966263876786dbb71b0c"><span class="id" title="variable">Δ'''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#b73faf325f76646787a7bae4ee8ea0fb"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#3bb4d656e682dad77334af07efd1504f"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#575c523ed494b0feefc206676a08b552"><span class="id" title="variable">Δ''</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Order.html#10952a7be013966263876786dbb71b0c"><span class="id" title="variable">Δ'''</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlt</span>|<span class="id" title="var">Heq</span>].<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Relations.Operators_Properties.html#clos_rt_t"><span class="id" title="lemma">Operators_Properties.clos_rt_t</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Δ''</span>  <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">RelUtil.tc_incl_rtc</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_right"><span class="id" title="lemma">env_order_disj_union_compat_right</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_left"><span class="id" title="lemma">env_order_disj_union_compat_left</span></a>.<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_left"><span class="id" title="lemma">env_order_disj_union_compat_left</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*<br/>
Lemma&nbsp;open_box_env_order(φ&nbsp;:&nbsp;form)&nbsp;:&nbsp;({<span class="inlinecode">+</span> <span class="inlinecode">⊙φ</span> <span class="inlinecode">+</span>}&nbsp;≺&nbsp;{<span class="inlinecode">+</span> <span class="inlinecode">φ</span> <span class="inlinecode">+</span>})&nbsp;\/&nbsp;({<span class="inlinecode">+</span> <span class="inlinecode">⊙</span> <span class="inlinecode">φ</span> <span class="inlinecode">+</span>}&nbsp;=&nbsp;{<span class="inlinecode">+</span> <span class="inlinecode">φ</span> <span class="inlinecode">+</span>}).<br/>
Proof.<br/>
<br/>
Qed.<br/>
*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_env_order" class="idref" href="#open_boxes_env_order"><span class="id" title="lemma">open_boxes_env_order</span></a> <a id="77e0d0de3367d6e853ec4390bc2e7dbf" class="idref" href="#77e0d0de3367d6e853ec4390bc2e7dbf"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="ISL.Order.html#77e0d0de3367d6e853ec4390bc2e7dbf"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#77e0d0de3367d6e853ec4390bc2e7dbf"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|φ <span class="id" title="var">Δ</span>] <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>. <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHΔ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlt</span> | <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><span class="id" title="var">Δ</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a>φ) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Δ</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a>φ)). <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_strong_right"><span class="id" title="lemma">env_order_disj_union_compat_strong_right</span></a>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> φ; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">ms</span>. <span class="id" title="tactic">left</span>. <span class="comment">(*&nbsp;TODO:&nbsp;lemme&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a> <span class="id" title="var">_</span> (<span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">∅</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a>φ) <span class="id" title="var">_</span> ). <span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_1"><span class="id" title="lemma">env_order_1</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>, <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a>, <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> φ); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hbox</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_strong_right"><span class="id" title="lemma">env_order_disj_union_compat_strong_right</span></a>; [|<span class="id" title="var">ms</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> φ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbox</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a> <span class="id" title="var">_</span> (<span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">∅</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a>φ) <span class="id" title="var">_</span> ). <span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">ms</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_1"><span class="id" title="lemma">env_order_1</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> φ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">open_boxes_env_order</span> : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="assoc_meq_union" class="idref" href="#assoc_meq_union"><span class="id" title="instance">assoc_meq_union</span></a> : <span class="id" title="class">Assoc</span> <a class="idref" href="ISL.Environments.html#EnvMS.meq"><span class="id" title="definition">meq</span></a> <a class="idref" href="ISL.Environments.html#EnvMS.union"><span class="id" title="definition">union</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_0" class="idref" href="#env_order_0"><span class="id" title="lemma">env_order_0</span></a> <a id="7d31cd8629b7f8d251b98b4f2ca5fee1" class="idref" href="#7d31cd8629b7f8d251b98b4f2ca5fee1"><span class="id" title="binder">Δ</span></a> <a id="f670e0558f9ccb8c272365f4c1295f3f" class="idref" href="#f670e0558f9ccb8c272365f4c1295f3f"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Order.html#7d31cd8629b7f8d251b98b4f2ca5fee1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#7d31cd8629b7f8d251b98b4f2ca5fee1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#f670e0558f9ccb8c272365f4c1295f3f"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; [<span class="id" title="tactic">reflexivity</span>| <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#MO.MSet.union_empty"><span class="id" title="lemma">MSet.union_empty</span></a>|].<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.not_empty"><span class="id" title="lemma">MSet.not_empty</span></a>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">Hy</span>| <span class="id" title="var">ms</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;ok?&nbsp;to&nbsp;replace&nbsp;env_order_*&nbsp;?<br/>
Lemma&nbsp;env_order_l&nbsp;(Δ'&nbsp;Δ:&nbsp;env)&nbsp;φ1&nbsp;φ:&nbsp;weight&nbsp;φ1&nbsp;&lt;&nbsp;weight&nbsp;φ&nbsp;-&gt;&nbsp;(Δ'&nbsp;≺&nbsp;Δ&nbsp;•&nbsp;φ)&nbsp;-&gt;&nbsp;(Δ'&nbsp;•&nbsp;φ1)&nbsp;≺&nbsp;(Δ&nbsp;•&nbsp;φ).<br/>
Proof.<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_2" class="idref" href="#env_order_2"><span class="id" title="lemma">env_order_2</span></a>  <a id="132798b8acac29be931b8af59d1aecf3" class="idref" href="#132798b8acac29be931b8af59d1aecf3"><span class="id" title="binder">Δ</span></a> <a id="546229e37356dc55e9fecb40883583fc" class="idref" href="#546229e37356dc55e9fecb40883583fc"><span class="id" title="binder">Δ'</span></a> <a id="266a18d6bd65b04a8ac73073006d7657" class="idref" href="#266a18d6bd65b04a8ac73073006d7657"><span class="id" title="binder">φ1</span></a> <a id="2efaadc49e83abc5449e963c0b35d5ef" class="idref" href="#2efaadc49e83abc5449e963c0b35d5ef"><span class="id" title="binder">φ2</span></a> <a id="b03f05c6d4fe64a9f8aa13afac2780cc" class="idref" href="#b03f05c6d4fe64a9f8aa13afac2780cc"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#266a18d6bd65b04a8ac73073006d7657"><span class="id" title="variable">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#b03f05c6d4fe64a9f8aa13afac2780cc"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#2efaadc49e83abc5449e963c0b35d5ef"><span class="id" title="variable">φ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#b03f05c6d4fe64a9f8aa13afac2780cc"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#546229e37356dc55e9fecb40883583fc"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#132798b8acac29be931b8af59d1aecf3"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#546229e37356dc55e9fecb40883583fc"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#266a18d6bd65b04a8ac73073006d7657"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#2efaadc49e83abc5449e963c0b35d5ef"><span class="id" title="variable">φ2</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#132798b8acac29be931b8af59d1aecf3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#b03f05c6d4fe64a9f8aa13afac2780cc"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hw1</span> <span class="id" title="var">Hw2</span> <span class="id" title="var">Hor</span>.<br/>
<span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a>  <span class="id" title="var">_</span> (<span class="id" title="notation">(</span><span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ1 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ2<span class="id" title="notation">)</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">(</span><span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ<span class="id" title="notation">)</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ</span>)) . <span class="id" title="var">ms</span>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_strong_right"><span class="id" title="lemma">env_order_disj_union_compat_strong_right</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>; [<span class="id" title="tactic">reflexivity</span>| |].<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">assoc</span>; [<span class="id" title="tactic">reflexivity</span>|]. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#assoc_meq_union"><span class="id" title="instance">assoc_meq_union</span></a>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_union"><span class="id" title="lemma">MSet.member_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hy</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hy</span>|<span class="id" title="var">Hy</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_singleton"><span class="id" title="lemma">MSet.member_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hy</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_3" class="idref" href="#env_order_3"><span class="id" title="lemma">env_order_3</span></a>  <a id="9ae7365ab03b98eff27d80ee70c686fa" class="idref" href="#9ae7365ab03b98eff27d80ee70c686fa"><span class="id" title="binder">Δ</span></a> <a id="d6300eb5cb6ff84c1cb6a0d11e506a3a" class="idref" href="#d6300eb5cb6ff84c1cb6a0d11e506a3a"><span class="id" title="binder">Δ'</span></a> <a id="2c21ee4fd731c47338dbce4ced7e49a1" class="idref" href="#2c21ee4fd731c47338dbce4ced7e49a1"><span class="id" title="binder">φ1</span></a> <a id="236fddcc522305c3907f6751e401d167" class="idref" href="#236fddcc522305c3907f6751e401d167"><span class="id" title="binder">φ2</span></a> <a id="56ac739bece29c3afe649ad0c9b31e95" class="idref" href="#56ac739bece29c3afe649ad0c9b31e95"><span class="id" title="binder">φ3</span></a> <a id="9828c323402d757d76b8834c72661c1d" class="idref" href="#9828c323402d757d76b8834c72661c1d"><span class="id" title="binder">φ</span></a>: <br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#2c21ee4fd731c47338dbce4ced7e49a1"><span class="id" title="variable">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#9828c323402d757d76b8834c72661c1d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#236fddcc522305c3907f6751e401d167"><span class="id" title="variable">φ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#9828c323402d757d76b8834c72661c1d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#56ac739bece29c3afe649ad0c9b31e95"><span class="id" title="variable">φ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#9828c323402d757d76b8834c72661c1d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#d6300eb5cb6ff84c1cb6a0d11e506a3a"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#9ae7365ab03b98eff27d80ee70c686fa"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Order.html#d6300eb5cb6ff84c1cb6a0d11e506a3a"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#2c21ee4fd731c47338dbce4ced7e49a1"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#236fddcc522305c3907f6751e401d167"><span class="id" title="variable">φ2</span></a>  <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#56ac739bece29c3afe649ad0c9b31e95"><span class="id" title="variable">φ3</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#9ae7365ab03b98eff27d80ee70c686fa"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#9828c323402d757d76b8834c72661c1d"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hw1</span> <span class="id" title="var">Hw2</span> <span class="id" title="var">Hw3</span> <span class="id" title="var">Hor</span>.<br/>
<span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a>  <span class="id" title="var">_</span> (<span class="id" title="notation">(</span><span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ1 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ2 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ3<span class="id" title="notation">)</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">(</span><span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ<span class="id" title="notation">)</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ</span>)) . <span class="id" title="var">ms</span>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_strong_right"><span class="id" title="lemma">env_order_disj_union_compat_strong_right</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Environments.html#MO.MSetRed"><span class="id" title="constructor">MSetRed</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Y</span> := <span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ1 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ2 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ3); [<span class="id" title="tactic">reflexivity</span>| |].<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_union"><span class="id" title="lemma">MSet.member_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hy</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hy</span>|<span class="id" title="var">Hy</span>];<br/>
&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_singleton"><span class="id" title="lemma">MSet.member_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hy</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.not_empty"><span class="id" title="lemma">MSet.not_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_4" class="idref" href="#env_order_4"><span class="id" title="lemma">env_order_4</span></a>  <a id="470a1afdbbe48f100e3c886f9cdd5bf9" class="idref" href="#470a1afdbbe48f100e3c886f9cdd5bf9"><span class="id" title="binder">Δ</span></a> <a id="731ee34e3913bf3a0c22c2d0c47a58db" class="idref" href="#731ee34e3913bf3a0c22c2d0c47a58db"><span class="id" title="binder">Δ'</span></a> <a id="e20fce13ed389dcfeaa29c4fc829f1ee" class="idref" href="#e20fce13ed389dcfeaa29c4fc829f1ee"><span class="id" title="binder">φ1</span></a> <a id="4d3337ea0bc69103e628d67c964fde89" class="idref" href="#4d3337ea0bc69103e628d67c964fde89"><span class="id" title="binder">φ2</span></a> <a id="71cb9f77523dd4e324e92201fab7928c" class="idref" href="#71cb9f77523dd4e324e92201fab7928c"><span class="id" title="binder">φ3</span></a> <a id="b8f53d1da9ebae013883e37f0b3a7de9" class="idref" href="#b8f53d1da9ebae013883e37f0b3a7de9"><span class="id" title="binder">φ4</span></a> <a id="446d542474945d9a4049ff0cab088f3f" class="idref" href="#446d542474945d9a4049ff0cab088f3f"><span class="id" title="binder">φ</span></a>: <br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#e20fce13ed389dcfeaa29c4fc829f1ee"><span class="id" title="variable">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#446d542474945d9a4049ff0cab088f3f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#4d3337ea0bc69103e628d67c964fde89"><span class="id" title="variable">φ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#446d542474945d9a4049ff0cab088f3f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#71cb9f77523dd4e324e92201fab7928c"><span class="id" title="variable">φ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#446d542474945d9a4049ff0cab088f3f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#b8f53d1da9ebae013883e37f0b3a7de9"><span class="id" title="variable">φ4</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Order.html#446d542474945d9a4049ff0cab088f3f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#731ee34e3913bf3a0c22c2d0c47a58db"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#470a1afdbbe48f100e3c886f9cdd5bf9"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#731ee34e3913bf3a0c22c2d0c47a58db"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#e20fce13ed389dcfeaa29c4fc829f1ee"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#4d3337ea0bc69103e628d67c964fde89"><span class="id" title="variable">φ2</span></a>  <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#71cb9f77523dd4e324e92201fab7928c"><span class="id" title="variable">φ3</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#b8f53d1da9ebae013883e37f0b3a7de9"><span class="id" title="variable">φ4</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#470a1afdbbe48f100e3c886f9cdd5bf9"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#446d542474945d9a4049ff0cab088f3f"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hw1</span> <span class="id" title="var">Hw2</span> <span class="id" title="var">Hw3</span> <span class="id" title="var">Hw4</span> <span class="id" title="var">Hor</span>.<br/>
<span class="id" title="tactic">eapply</span> (<a class="idref" href="ISL.Order.html#Proper_env_order"><span class="id" title="instance">Proper_env_order</span></a>  <span class="id" title="var">_</span> (<span class="id" title="notation">(</span><span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ1 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ2 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ3 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ4<span class="id" title="notation">)</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ'</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">(</span><span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ<span class="id" title="notation">)</span> <span class="id" title="notation">⊎</span> <span class="id" title="var">Δ</span>)) . <span class="id" title="var">ms</span>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_disj_union_compat_strong_right"><span class="id" title="lemma">env_order_disj_union_compat_strong_right</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Environments.html#MO.MSetRed"><span class="id" title="constructor">MSetRed</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Y</span> := <span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ1 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ2 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ3 <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ4); [<span class="id" title="tactic">reflexivity</span>| |].<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_union"><span class="id" title="lemma">MSet.member_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hy</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hy</span>|<span class="id" title="var">Hy</span>];<br/>
&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.member_singleton"><span class="id" title="lemma">MSet.member_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hy</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#MO.MSet.not_empty"><span class="id" title="lemma">MSet.not_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="var">Unshelve</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_cancel_right" class="idref" href="#env_order_cancel_right"><span class="id" title="lemma">env_order_cancel_right</span></a> <a id="5b5e1b088e4e01e3ccd4c298fc9c973b" class="idref" href="#5b5e1b088e4e01e3ccd4c298fc9c973b"><span class="id" title="binder">Δ</span></a> <a id="3d8131066c89ab2059835b442d2b114c" class="idref" href="#3d8131066c89ab2059835b442d2b114c"><span class="id" title="binder">Δ'</span></a> <a id="a6907591c18ff9049e8f912ac42d7ac7" class="idref" href="#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="binder">φ</span></a>:  <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#5b5e1b088e4e01e3ccd4c298fc9c973b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#3d8131066c89ab2059835b442d2b114c"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#5b5e1b088e4e01e3ccd4c298fc9c973b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#3d8131066c89ab2059835b442d2b114c"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">etransitivity</span>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_0"><span class="id" title="lemma">env_order_0</span></a>]. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_order_eq_add" class="idref" href="#env_order_eq_add"><span class="id" title="lemma">env_order_eq_add</span></a> <a id="e889f5459734bf7cd51e4fdb10aa3a03" class="idref" href="#e889f5459734bf7cd51e4fdb10aa3a03"><span class="id" title="binder">Δ</span></a> <a id="955a3665889e45d6449fb87bd1e66ada" class="idref" href="#955a3665889e45d6449fb87bd1e66ada"><span class="id" title="binder">Δ'</span></a> <a id="a2960d92c3b2439b107d8071a9ad5a42" class="idref" href="#a2960d92c3b2439b107d8071a9ad5a42"><span class="id" title="binder">φ</span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#e889f5459734bf7cd51e4fdb10aa3a03"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#955a3665889e45d6449fb87bd1e66ada"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#e889f5459734bf7cd51e4fdb10aa3a03"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#a2960d92c3b2439b107d8071a9ad5a42"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">≼</span></a> <a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#955a3665889e45d6449fb87bd1e66ada"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#a2960d92c3b2439b107d8071a9ad5a42"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Order.html#18cb969368e82052920d9ba5707bb97c"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>[<span class="id" title="var">Heq</span>|<span class="id" title="var">Hlt</span>]. <span class="id" title="tactic">left</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_add_compat"><span class="id" title="lemma">env_order_add_compat</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_0</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_1</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_2</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_3</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_4</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_add_compat</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_cancel_right</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">env_order_eq_add</span> : <span class="id" title="var">order</span>.<br/>
<span class="id" title="keyword">Global Hint Extern</span> 1 (?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> ?<span class="id" title="var">b</span>) =&gt; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span> : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">get_diff_form</span> <span class="id" title="var">g</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">g</span> <span class="id" title="keyword">with</span><br/>
| ?<span class="id" title="var">Γ</span> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span>?φ<span class="id" title="notation">]}</span> =&gt; φ<br/>
| <span class="id" title="var">_</span> (?<span class="id" title="var">Γ</span> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span>?φ<span class="id" title="notation">]}</span>) =&gt; φ<br/>
| ?<span class="id" title="var">Γ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">get_diff_form</span> <span class="id" title="var">Γ</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">get_diff_env</span> <span class="id" title="var">g</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">g</span> <span class="id" title="keyword">with</span><br/>
| ?<span class="id" title="var">Γ</span> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span>?φ<span class="id" title="notation">]}</span> =&gt; <span class="id" title="var">Γ</span><br/>
| ?<span class="id" title="var">Γ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">get_diff_env</span> <span class="id" title="var">Γ</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_remove"><span class="id" title="lemma">open_boxes_remove</span></a> : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">prepare_order</span> := <br/>
<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_add_compat"><span class="id" title="lemma">env_order_add_compat</span></a>);<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#pointed_env_order"><span class="id" title="definition">pointed_env_order</span></a>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">Δ</span> := <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">subst</span> <span class="id" title="var">Δ</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">prepare_order</span><br/>
| <span class="id" title="var">H</span> : ?ψ <span class="id" title="notation">∈</span> ?<span class="id" title="var">Γ</span> |- ?<span class="id" title="var">Γ'</span> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> ?<span class="id" title="var">Γ</span> =&gt; <span class="id" title="keyword">let</span> ψ' := (<span class="id" title="var">get_diff_form</span> <span class="id" title="var">Γ'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ISL.Order.html#env_order_equiv_right_compat"><span class="id" title="lemma">env_order_equiv_right_compat</span></a> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> ψ' <span class="id" title="var">H</span>))<br/>
| <span class="id" title="var">H</span> : ?ψ <span class="id" title="notation">∈</span> ?<span class="id" title="var">Γ</span> |- ?<span class="id" title="var">Γ'</span> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> ?<span class="id" title="var">Γ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> ?φ =&gt; <span class="id" title="keyword">let</span> ψ' := (<span class="id" title="var">get_diff_form</span> <span class="id" title="var">Γ'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ISL.Order.html#env_order_equiv_right_compat"><span class="id" title="lemma">env_order_equiv_right_compat</span></a> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a>(<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> ψ' <span class="id" title="var">H</span>)))<br/>
| <span class="id" title="var">H</span> : ?ψ <span class="id" title="notation">∈</span> ?<span class="id" title="var">Γ</span> |- ?<span class="id" title="var">Γ'</span> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> ?<span class="id" title="var">Γ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">_</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">let</span> ψ' := (<span class="id" title="var">get_diff_form</span> <span class="id" title="var">Γ'</span>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="tactic">apply</span> (<a class="idref" href="ISL.Order.html#env_order_equiv_right_compat"><span class="id" title="lemma">env_order_equiv_right_compat</span></a> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a>(<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a>(<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> ψ' <span class="id" title="var">H</span>))))<br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="comment">(*<br/>
Global&nbsp;Hint&nbsp;Extern&nbsp;2&nbsp;((?Γ&nbsp;&nbsp;∖&nbsp;{<span class="inlinecode">?ψ</span>}&nbsp;,&nbsp;?φ)&nbsp;≺·&nbsp;(?Γ,&nbsp;?φ))&nbsp;=&gt;&nbsp;prepare_order&nbsp;:&nbsp;order.<br/>
Global&nbsp;Hint&nbsp;Extern&nbsp;2&nbsp;(?Γ&nbsp;&nbsp;∖&nbsp;{<span class="inlinecode">?ψ</span>}&nbsp;•&nbsp;?φ'&nbsp;•&nbsp;?φ''&nbsp;≺&nbsp;?Γ&nbsp;•&nbsp;?φ)&nbsp;=&gt;&nbsp;prepare_order&nbsp;:&nbsp;order.<br/>
Global&nbsp;Hint&nbsp;Extern&nbsp;2&nbsp;(?Γ&nbsp;&nbsp;∖&nbsp;{<span class="inlinecode">?ψ</span>}&nbsp;•&nbsp;?φ'&nbsp;•&nbsp;?φ''&nbsp;≺&nbsp;?Γ&nbsp;•&nbsp;?φ&nbsp;•&nbsp;?φ''')&nbsp;=&gt;&nbsp;prepare_order&nbsp;:&nbsp;order.<br/>
Global&nbsp;Hint&nbsp;Extern&nbsp;2&nbsp;(?Γ&nbsp;&nbsp;∖&nbsp;{<span class="inlinecode">?ψ</span>}&nbsp;•&nbsp;?φ'&nbsp;•&nbsp;?φ''&nbsp;•&nbsp;?φ''''&nbsp;≺&nbsp;?Γ&nbsp;•&nbsp;?φ&nbsp;•&nbsp;?φ''')&nbsp;=&gt;&nbsp;prepare_order&nbsp;:&nbsp;order.<br/>
Global&nbsp;Hint&nbsp;Extern&nbsp;2&nbsp;(?Γ&nbsp;&nbsp;∖&nbsp;{<span class="inlinecode">?ψ</span>}&nbsp;•&nbsp;?φ'&nbsp;≺&nbsp;?Γ&nbsp;•&nbsp;?φ)&nbsp;=&gt;&nbsp;prepare_order&nbsp;:&nbsp;order.<br/>
Global&nbsp;Hint&nbsp;Extern&nbsp;2&nbsp;(?Γ&nbsp;&nbsp;∖&nbsp;{<span class="inlinecode">?ψ</span>}&nbsp;•&nbsp;?φ'&nbsp;≺&nbsp;?Γ&nbsp;•&nbsp;?φ&nbsp;&nbsp;•&nbsp;?φ')&nbsp;=&gt;&nbsp;prepare_order&nbsp;:&nbsp;order.<br/>
*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="make_impl_weight" class="idref" href="#make_impl_weight"><span class="id" title="lemma">make_impl_weight</span></a> <a id="0aff2e08e4e5c21bdd72ff22942a9598" class="idref" href="#0aff2e08e4e5c21bdd72ff22942a9598"><span class="id" title="binder">φ</span></a> <a id="d78901349cf91c611cb50cb2ea4b6071" class="idref" href="#d78901349cf91c611cb50cb2ea4b6071"><span class="id" title="binder">ψ</span></a>: <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (<a class="idref" href="ISL.Order.html#0aff2e08e4e5c21bdd72ff22942a9598"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.Order.html#d78901349cf91c611cb50cb2ea4b6071"><span class="id" title="variable">ψ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (<a class="idref" href="ISL.Order.html#0aff2e08e4e5c21bdd72ff22942a9598"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Order.html#d78901349cf91c611cb50cb2ea4b6071"><span class="id" title="variable">ψ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.Environments.html#make_impl_spec"><span class="id" title="lemma">make_impl_spec</span></a> φ ψ) <span class="id" title="keyword">as</span> [[[<span class="id" title="var">Heq'</span> <span class="id" title="var">Heq</span>]|[<span class="id" title="var">Heq'</span> <span class="id" title="var">Heq</span>]]|<span class="id" title="var">Heq</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> := <a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> ψ). <span class="id" title="var">lia</span>.<br/>
-  <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="make_impl_weight2" class="idref" href="#make_impl_weight2"><span class="id" title="lemma">make_impl_weight2</span></a> <a id="8dbfca0eacb4b03140997e7a2bae7595" class="idref" href="#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="binder">φ</span></a> <a id="64c822ad84baa31bad1230fb688994ba" class="idref" href="#64c822ad84baa31bad1230fb688994ba"><span class="id" title="binder">ψ</span></a> <a id="1cc8d3c2d11a392e033adc8b28889535" class="idref" href="#1cc8d3c2d11a392e033adc8b28889535"><span class="id" title="binder">θ</span></a>: <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (<a class="idref" href="ISL.Order.html#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#64c822ad84baa31bad1230fb688994ba"><span class="id" title="variable">ψ</span></a> <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.Order.html#1cc8d3c2d11a392e033adc8b28889535"><span class="id" title="variable">θ</span></a><a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (<a class="idref" href="ISL.Order.html#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#64c822ad84baa31bad1230fb688994ba"><span class="id" title="variable">ψ</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Order.html#1cc8d3c2d11a392e033adc8b28889535"><span class="id" title="variable">θ</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Order.html#make_impl_weight"><span class="id" title="lemma">make_impl_weight</span></a> ψ <span class="id" title="var">θ</span>).<br/>
<span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Order.html#make_impl_weight"><span class="id" title="lemma">make_impl_weight</span></a> φ (ψ <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <span class="id" title="var">θ</span>)).<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Extern</span>  5  (<a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (?φ <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> ?ψ) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">_</span>) =&gt; (<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.le_lt_trans"><span class="id" title="lemma">Nat.le_lt_trans</span></a>; [<span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Order.html#make_impl_weight"><span class="id" title="lemma">make_impl_weight</span></a>|]) : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Extern</span>  5  (<a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (?φ <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">(</span></a>?ψ <a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> ?<span class="id" title="var">θ</span><a class="idref" href="ISL.Environments.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">_</span>) =&gt; (<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.le_lt_trans"><span class="id" title="lemma">Nat.le_lt_trans</span></a>; [<span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Order.html#make_impl_weight2"><span class="id" title="lemma">make_impl_weight2</span></a>|]) : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;new&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;ad&nbsp;hoc&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="openboxes_env_order" class="idref" href="#openboxes_env_order"><span class="id" title="lemma">openboxes_env_order</span></a> <a id="dd7f4b9f97d73aa8deb78211719d7baa" class="idref" href="#dd7f4b9f97d73aa8deb78211719d7baa"><span class="id" title="binder">Δ</span></a> <a id="d31744ee7b6d86e9b59167e3a98f5014" class="idref" href="#d31744ee7b6d86e9b59167e3a98f5014"><span class="id" title="binder">δ</span></a> :  <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="ISL.Order.html#dd7f4b9f97d73aa8deb78211719d7baa"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#d31744ee7b6d86e9b59167e3a98f5014"><span class="id" title="variable">δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Order.html#d31744ee7b6d86e9b59167e3a98f5014"><span class="id" title="variable">δ</span></a> <a class="idref" href="ISL.Order.html#e87830648f12945c0aeb4eaf8e8aac32"><span class="id" title="notation">≺</span></a> <a class="idref" href="ISL.Order.html#dd7f4b9f97d73aa8deb78211719d7baa"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Order.html#d31744ee7b6d86e9b59167e3a98f5014"><span class="id" title="variable">δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">eapply</span> @<a class="idref" href="ISL.Order.html#env_order_equiv_left_compat"><span class="id" title="lemma">env_order_equiv_left_compat</span></a> <span class="id" title="keyword">with</span>  (<span class="id" title="notation">∅</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">δ</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_2"><span class="id" title="lemma">env_order_2</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">apply</span> (@<a class="idref" href="ISL.Order.html#env_order_equiv_right_compat"><span class="id" title="lemma">env_order_equiv_right_compat</span></a> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <span class="id" title="var">δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">x</span>)); [<span class="id" title="var">ms</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (@<a class="idref" href="ISL.Order.html#env_order_equiv_left_compat"><span class="id" title="lemma">env_order_equiv_left_compat</span></a>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">Δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a>  <a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>, <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a>. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">solve</span>[<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_add_compat"><span class="id" title="lemma">env_order_add_compat</span></a>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a><span class="id" title="var">δ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_1"><span class="id" title="lemma">env_order_1</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">openboxes_env_order</span> : <span class="id" title="var">order</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">order_tac</span> := <span class="id" title="var">prepare_order</span>; <span class="id" title="tactic">auto</span> 10 <span class="id" title="keyword">with</span> <span class="id" title="var">order</span>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
